<%= render "shared/navbar" %>

<h1 class="title my-5">
  <div class="garden-title">
    <p class="font-oleo">Plants in <%= @garden.name %></p>
    <div class = "div_btn_de-edi">
      <%= link_to garden_path(@garden), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}, class:"btn_edit_delete" do %>
        <i class="fa-solid fa-trash"></i>
      <% end %>
    </div>
  </div>
</h1>

<div class="article-container">
  <article class="widget" data-controller="weather" data-weather-api-key-value="<%= ENV['FORECAST_API_KEY']%>">
    <div class="weatherIcon">
      <div class="element">
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 61.7 42.8" style="enable-background:new 0 0 61.7 42.8;" xml:space="preserve">
          <g id="Cloud_3">
            <g id="White_cloud_3">
              <path id="XMLID_24_" class="white" d="M47.2,42.8H7.9c-4.3,0-7.9-3.5-7.9-7.9l0,0C0,30.5,3.5,27,7.9,27h39.4c4.3,0,7.9,3.5,7.9,7.9 v0C55.1,39.2,51.6,42.8,47.2,42.8z"/>
              <circle id="XMLID_23_" class="white" cx="17.4" cy="25.5" r="9.3"/>
              <circle id="XMLID_22_" class="white" cx="34.5" cy="23.9" r="15.6"/>
              <animateTransform attributeName="transform"
                                attributeType="XML"
                                dur="6s"
                                keyTimes="0;0.5;1"
                                repeatCount="indefinite"
                                type="translate"
                                values="0;5;0"
                                calcMode="linear">
              </animateTransform>
            </g>
            <g id="Sun_3">
              <circle id="XMLID_30_" class="yellow" cx="31.4" cy="18.5" r="9"/>
              <g>
                <path id="XMLID_31_" class="yellow" d="M31.4,6.6L31.4,6.6c-0.4,0-0.6-0.3-0.6-0.6V0.6C30.8,0.3,31,0,31.3,0l0.1,0 C31.7,0,32,0.3,32,0.6v5.5C32,6.4,31.7,6.6,31.4,6.6z"/>
                <path id="XMLID_34_" class="yellow" d="M31.4,30.1L31.4,30.1c-0.4,0-0.6,0.3-0.6,0.6v5.5c0,0.3,0.3,0.6,0.6,0.6h0.1 c0.3,0,0.6-0.3,0.6-0.6v-5.5C32,30.4,31.7,30.1,31.4,30.1z"/>
                <path id="XMLID_35_" class="yellow" d="M19.6,18.3L19.6,18.3c0,0.4-0.3,0.6-0.6,0.6h-5.5c-0.3,0-0.6-0.3-0.6-0.6v-0.1 c0-0.3,0.3-0.6,0.6-0.6H19C19.3,17.8,19.6,18,19.6,18.3z"/>
                <path id="XMLID_33_" class="yellow" d="M43.1,18.3L43.1,18.3c0,0.4,0.3,0.6,0.6,0.6h5.5c0.3,0,0.6-0.3,0.6-0.6v-0.1 c0-0.3-0.3-0.6-0.6-0.6h-5.5C43.4,17.8,43.1,18,43.1,18.3z"/>
                <path id="XMLID_37_" class="yellow" d="M22.4,26L22.4,26c0.3,0.3,0.2,0.7,0,0.9l-4.2,3.6c-0.2,0.2-0.6,0.2-0.8-0.1l-0.1-0.1 c-0.2-0.2-0.2-0.6,0.1-0.8l4.2-3.6C21.9,25.8,22.2,25.8,22.4,26z"/>
                <path id="XMLID_36_" class="yellow" d="M40.3,10.7L40.3,10.7c0.3,0.3,0.6,0.3,0.8,0.1l4.2-3.6c0.2-0.2,0.3-0.6,0.1-0.8l-0.1-0.1 c-0.2-0.2-0.6-0.3-0.8-0.1l-4.2,3.6C40.1,10.1,40,10.5,40.3,10.7z"/>
                <path id="XMLID_39_" class="yellow" d="M22.4,10.8L22.4,10.8c0.3-0.3,0.2-0.7,0-0.9l-4.2-3.6c-0.2-0.2-0.6-0.2-0.8,0.1l-0.1,0.1 c-0.2,0.2-0.2,0.6,0.1,0.8l4.2,3.6C21.9,11,22.2,11,22.4,10.8z"/>
                <path id="XMLID_38_" class="yellow" d="M40.3,26.1L40.3,26.1c0.3-0.3,0.6-0.3,0.8-0.1l4.2,3.6c0.2,0.2,0.3,0.6,0.1,0.8l-0.1,0.1 c-0.2,0.2-0.6,0.3-0.8,0.1l-4.2-3.6C40.1,26.7,40,26.3,40.3,26.1z"/>
                <animate attributeType="CSS"
                        attributeName="opacity"
                        attributeType="XML"
                        dur="0.5s"
                        keyTimes="0;0.5;1"
                        repeatCount="indefinite"
                        values="1;0.6;1"
                        calcMode="linear"/>
              </g>
            </g>
            <animateTransform attributeName="transform"
                              attributeType="XML"
                              dur="2s"
                              keyTimes="0;1"
                              repeatCount="indefinite"
                              type="scale"
                              values="1;1"
                              calcMode="linear">
            </animateTransform>
          </g>
          <g id="Gray_cloud_3">
            <path id="XMLID_20_" class="gray" d="M55.7,25.1H34.4c-3.3,0-6-2.7-6-6v0c0-3.3,2.7-6,6-6h21.3c3.3,0,6,2.7,6,6v0 C61.7,22.4,59,25.1,55.7,25.1z"/>
            <circle id="XMLID_19_" class="gray" cx="46.7" cy="13.4" r="10.7"/>
            <animateTransform attributeName="transform"
                              attributeType="XML"
                              dur="6s"
                              keyTimes="0;0.5;1"
                              repeatCount="indefinite"
                              type="translate"
                              values="0;-3;0"
                              calcMode="linear">
            </animateTransform>
          </g>
        </svg>
      </div>
    </div>
    <div class="weatherData">
      <h1 class="temperature"><span data-weather-target="temperature"></span> <span class="deg">&deg;</span></h1>
      <h2 class="city" data-weather-target="address"><%= @address %></h2>
      <h3 class="country" data-weather-target="region"></h3>
    </div>
    <div class="date">
      <h4 class="month" id="month"><%= Date::MONTHNAMES[Time.now.month] %></h4>
      <h5 class="day" id="day"><%= Time.now.day %></h5>
    </div>
  </article>
</div>


<div class="container garden-container mb-5">
  <% @tags.each do |tag| %>
    <% plant_id = tag.plant_id %>
    <% plant = Plant.find(plant_id) %>
    <% @condition = Condition.where(plant_id: plant) %>
    <div class="garden-card" onclick="this.classList.toggle('expanded')">
      <%# <button type="button" href"#" class="btn-close" disabled aria-label="Close"></button> %>
      <%= link_to "x", tag_path(tag), data: {turbo_method: :delete, turbo_confirm: "Are you sure?"}, class: "btn_close" %>
      <p><%= plant.name %></p>
      <!-- visible content -->
      <%= cl_image_tag plant.photo.key, height:150, class:"label" %>
      <!-- hidden content -->
      <div class="text1">
        <div class="garden-text-content">
          <h3 class="garden-title">Daily</h3>
          <div class="body-text">
            <div>
              <p><i class="fa-solid fa-cloud-sun fa-2x"></i></p>
              <p><strong><%= @condition.first.sun %></strong></p>
            </div>
            <div>
              <p><i class="fa-solid fa-droplet fa-2x"></i></p>
              <p><strong><%= @condition.first.water %></strong></p>
            </div>
            <div>
              <p><i class="fa-solid fa-temperature-high fa-2x"></i></p>
              <p><strong><%= @condition.first.climate %></strong></p>
            </div>
          </div>
        </div>
      </div>
      <!-- bottom icon -->
      <svg class="chevron" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 35" width="30"><path d="M5 30L50 5l45 25" fill="none" stroke="#000" stroke-width="5"/></svg>
    </div>
  <% end %>
</div>
<%= render "shared/footer" %>
